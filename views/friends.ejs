<script>
    const userId = '<%= userId %>'
</script>

<body>
    <div class="wrapper">
        <div class="flex gap-x-20 w-full py-6 items-center">
            <button id="addFriendBtn" class="bg-gray-600 text-white text-lg font-medium px-5 py-1 rounded-md shadow-md hover:opacity-90 transition-opacity">Add Friend</button>
            <div class="flex text-lg font-semibold items-center gap-x-5">
                User ID:
                <div class="border border-gray-600 bg-gray-200 rounded-md pl-4 pr-2 py-1"><%= userId %> 
                    <svg xmlns="http://www.w3.org/2000/svg" id="copyUserIdBtn" class="h-7 w-7 inline ml-5 cursor-pointer hover:bg-gray-300 transition-colors rounded-md p-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                      </svg>
                </div>
            </div>
        </div>

        <div class="flex gap-x-10">
            <div class="p-5 w-2/3 bg-white rounded-md shadow-md">
                <div class="text-gray-700 text-2xl font-semibold">Friends</div>
                <div class="w-full h-0.5 bg-gray-700 mb-8"></div>
                <!-- Friends -->
                <div class="w-full flex flex-col gap-y-3">
                    <% friends.forEach(friend => { %> 
                        <div data-id="<%= friend.id %>" class="w-full flex justify-between items-center py-2 px-4 bg-gray-200 rounded-md">
                            <a href="/profile/<%= friend.id %>" target="_blank" class="clr-secondary font-semibold hover:underline"><%= friend.name %></a>
                            <svg xmlns="http://www.w3.org/2000/svg" onmouseup="removeFriend('<%= friend.id %>')" class="h-7 w-7 p-0.5 text-red-500 cursor-pointer hover:bg-gray-300 transition-colors rounded-md" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6" />
                            </svg>
                        </div>
                    <% }) %>
                </div>
            </div>
            <!-- Friend requests -->
            <div class="p-5 w-1/3 bg-white rounded-md shadow-md">
                <div class="text-gray-700 text-2xl font-semibold">Friend requests</div>
                <div class="w-full h-0.5 bg-gray-700 mb-8"></div>

                <div class="w-full flex flex-col gap-y-3">
                    <% friendRequests.forEach(stranger => { %> 
                        <div data-id="<%= stranger.id %>" class="w-full flex justify-between items-center py-2 px-4 bg-gray-200 rounded-md">
                            <a href="/profile/<%= stranger.id %>" target="_blank" class="clr-secondary font-semibold hover:underline"><%= stranger.name %></a>
                            <div class="flex gap-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" onmouseup="acceptFriendRequest('<%= stranger.id %>')" class="h-7 w-7 p-0.5 text-green-500 cursor-pointer hover:bg-gray-300 transition-colors rounded-md" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z" />
                                </svg>
                                <svg xmlns="http://www.w3.org/2000/svg" onmouseup="rejectFriendRequest('<%= stranger.id %>')" class="h-7 w-7 p-0.5 text-red-500 cursor-pointer hover:bg-gray-300 transition-colors rounded-md" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
                                </svg>
                            </div>
                            
                        </div>
                    <% }) %>
                </div>
            </div>
        </div>
        <div id="addFriendContainer" class="absolute top-0 left-0 w-screen h-screen bg-black bg-opacity-40 hidden">
            <div id="addFriend" class="absolute w-3/4 h-3/5 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-xl shadow-2xl p-5 overflow-auto max-w-screen-md max-h-96 flex flex-col items-center justify-around">
                <p class="font-medium text-gray-600 text-xl">Enter your friend's ID to send a friend request</p>
                <div class="flex gap-x-5 w-full justify-center">
                    <div class="w-1/2">
                        <input id="sendFriendRequestInp" class="border border-gray-600 px-2 py-1 text-md rounded-md w-full h-full" type="text">
                        <div id="errorDiv" class="text-red-500"></div>
                    </div>
                    <button id="sendFriendRequestBtn" class="button button-primary hover:opacity-90 transition-opacity shadow-md">Send friend request</button>
                </div>
            </div>
        </div>
    </div>
    <script src="/scripts/friends.js"></script>
</body>